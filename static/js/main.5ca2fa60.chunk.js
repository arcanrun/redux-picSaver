(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){},33:function(e,t,n){e.exports=n(70)},38:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){},63:function(e,t,n){},65:function(e,t,n){},67:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(28),i=n.n(o),s=n(74),c=n(16);n(38),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(11),u=n(14),p=n(30),h=n(17),d=n(2),f="GET_PHOTOS_REQUEST",m="GET_PHOTOS_SUCCESS",g="GET_PHOTOS_FAILURE",E="SHOW_MORE_SUCCESS",v="SHOW_MORE_REQUEST",b={isFetching:!1,isFetchingForMore:!1,photos:[],error:!1,error_message:"",searchFor:""};var _={isVisible:!1};var O="USER_FETCHED_SUCCESS",y="USER_FETCHED_FAILD",S="EMAIL_FETCHED_SUCCESS",F="EMAIL_FETCHED_FAILED",k={name:"",last_name:"",avatar:"",vk_id:"",email:"",favorites_photos:{isFetching:!1,error:!1,error_message:!1,toggleIsFetching:!1,photos:[]},isFetching:!1,error:!1,error_message:""},j=Object(u.c)({photos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(d.a)({},e,{isFetchingForMore:t.payload.isFetching,searchFor:t.payload.searchFor});case E:return Object(d.a)({},e,{isFetchingForMore:!1,photos:[].concat(Object(h.a)(e.photos),Object(h.a)(t.payload.photos)),page:++e.page});case f:return Object(d.a)({},e,{isFetching:t.payload.isFetching,searchFor:t.payload.searchFor});case m:return Object(d.a)({},e,{isFetching:t.payload.isFetching,photos:t.payload.photos});case g:return Object(d.a)({},e,{isFetching:t.payload.isFetching,error:t.payload.error,error_message:t.payload.error_message});default:return e}},menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;switch((arguments.length>1?arguments[1]:void 0).type){case"TOGGLE_MENU":return Object(d.a)({},e,{isVisible:!e.isVisible});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(d.a)({},e,{name:t.payload.first_name,last_name:t.payload.last_name,avatar:t.payload.photo_200,vk_id:""+t.payload.id});case S:return Object(d.a)({},e,{email:t.payload.email});case F:return Object(d.a)({},e,{email:t.payload.error_type});case"GET_FAVPHOTOS_REQUEST":return Object(d.a)({},e,{favorites_photos:Object(d.a)({},e.favorites_photos,{isFetching:t.payload.isFetching})});case"GET_FAVPHOTOS_SUCCESS":return Object(d.a)({},e,{favorites_photos:Object(d.a)({},e.favorites_photos,{isFetching:t.payload.isFetching,photos:t.payload.photos})});case"GET_FAVPHOTOS_FAIELD":return Object(d.a)({},e,{favorites_photos:Object(d.a)({},e.favorites_photos,{isFetching:t.payload.isFetching,error:t.payload.error,error_message:t.payload.error_message})});case"TOGGLE_LIKE_REQUEST":return Object(d.a)({},e,{favorites_photos:Object(d.a)({},e.favorites_photos,{isFetching:t.payload.isFetching})});case"TOGGLE_LIKE_REMOVE_SUCCESS":var n=t.payload.id_photo,a=e.favorites_photos.photos,r=[];return a.forEach(function(e){e.id_photo!==n&&r.push(e)}),Object(d.a)({},e,{favorites_photos:Object(d.a)({},e.favorites_photos,{toggleIsFetching:t.payload.isFetching,photos:r})});case"TOGGLE_LIKE_ADDED_SUCCESS":return Object(d.a)({},e,{favorites_photos:Object(d.a)({},e.favorites_photos,{isFetching:t.payload.isFetching,photos:[].concat(Object(h.a)(e.favorites_photos.photos),[t.payload.photo])})});default:return e}}}),N=n(31),w=[p.a,N.logger],C=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,L=Object(u.e)(j,C(u.a.apply(void 0,w))),T=n(4),A=n.n(T),I=n(13),U=n(5),V=n(6),G=n(8),P=n(7),M=n(9),R=n(76),D=n(75),x=n(72),H=(n(23),n(47),{position:"absolute",cursor:"pointer",left:"20px",marginTop:"10px"}),K=function(e){var t=e.onClick;return r.a.createElement("header",{className:"header"},r.a.createElement("i",{className:"menu",style:H,onClick:t}),r.a.createElement("p",{className:"header__title"},"PhotoLike"))},W=function(){return{type:"TOGGLE_MENU"}},J=Object(l.b)(function(e){return{isVisible:e.menu.isVisible}},{onClick:W})(K),Q=n(71),B=(n(49),{position:"absolute",right:0,margin:"20px",cursor:"pointer"}),X=function(e){function t(){var e,n;Object(U.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(G.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).handleToggle=function(e){var t=e.target.nodeName;["A","I"].includes(t)&&n.props.onClick()},n}return Object(M.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isVisible,n=e.userName;return r.a.createElement("div",{className:t?"sidemenu":"sidemenu sidemenu_display_hidden",onClick:this.handleToggle},r.a.createElement("i",{className:"close",style:B}),r.a.createElement("ul",{className:"sidemenu__items"},r.a.createElement("li",null,r.a.createElement(Q.a,{to:"/"},"Home")),""===n?"":r.a.createElement("li",null,r.a.createElement(Q.a,{to:"/favorites"},"Favorites"))))}}]),t}(r.a.Component),q=Object(l.b)(function(e){return{isVisible:e.menu.isVisible,userName:e.user.name}},function(e){return{onClick:function(){return e({type:"TOGGLE_MENU"})}}})(X);function Y(e,t){return"https://api.unsplash.com/search/photos?page=".concat(parseInt(t),"&query=").concat(e,"&client_id=").concat("069e0572e4bf6c4760733f6bb075b7548b2c42370f3a64ffeed691910b32e2eb")}var $="/toggle-like/",z="/get-likes/",Z="/sign-up-vk/",ee="/is-like/",te=function(e){return"https://protected-dawn-46189.herokuapp.com"+e},ne="http://127.0.0.1:8000",ae=("".concat(ne,"/toggle-like/"),"".concat(ne,"/get-likes/"),"".concat(ne,"/get-likes/"),function(e){return{type:f,payload:{isFetching:!0,searchFor:e}}}),re=function(e){return{type:m,payload:{photos:e,isFetching:!1}}},oe=function(e){return{type:g,payload:{error:!0,isFetching:!1,error_message:new Error(e)}}};function ie(e){return fetch(te(ee),{method:"POST",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){return e.IS_LIKED}).catch(function(e){return console.log(new Error(e))})}var se=function(e){return{type:E,payload:{photos:e,isFetching:!1}}},ce=function(e){return{type:v,payload:{isFetching:!0,searchFor:e}}};n(51);var le=function(e){function t(e){var n;return Object(U.a)(this,t),(n=Object(G.a)(this,Object(P.a)(t).call(this,e))).handleChaneInput=function(e){n.props.onChange(e.target.value)},n.input=r.a.createRef(),n}return Object(M.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=this.input.current.value=this.props.searchFor;this.props.onChange(e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"search"},r.a.createElement("input",{ref:this.input,type:"text",className:"search__input",placeholder:"search...",onChange:this.handleChaneInput}))}}]),t}(r.a.Component),ue=Object(l.b)(function(e){return{searchFor:e.photos.searchFor}},function(e){return{onChange:function(t){return e(ae(t))}}})(le);n(53);function pe(e){var t=e.title;return r.a.createElement("div",{className:"warning-block"},r.a.createElement("h3",null,t))}n(55),n(57);var he=function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"double-bounce1"}),r.a.createElement("div",{className:"double-bounce2"}))},de=(n(59),function(e){function t(e){var n;return Object(U.a)(this,t),(n=Object(G.a)(this,Object(P.a)(t).call(this,e))).toggleAndHandleLike=function(){var e=n.props,t=e.id,a=e.urls,r=e.description;n.state.toggleVisibility&&n.setState({isVisible:!n.state.isVisible}),n.props.send(t,a,r,n.props.userName),n.setState({isLiked:!n.state.isLiked})},n.switchSendingLike=function(){n.setState({isSendingLike:!n.state.isSendingLike})},n.state={isLiked:n.props.isLiked,toggleVisibility:n.props.toggleVisibility,isVisible:!0},n}return Object(M.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props,t=e.urls,n=e.id,a=e.description,o=e.userName,i=this.state.isLiked;return this.state.isVisible?r.a.createElement("div",{className:"photos__item"},r.a.createElement("div",{className:"photos__item_warapper"},r.a.createElement("img",{id:n,className:"photos__item_img",src:t.small,alt:a})),r.a.createElement("div",{className:"photos__item_footer"},r.a.createElement("span",null,null!==a&&a.length>=20?a.slice(0,20)+"...":a),o?r.a.createElement("span",null,i?r.a.createElement("i",{className:"heart_red",style:{cursor:"pointer"},onClick:this.toggleAndHandleLike}):r.a.createElement("i",{className:"heart_black",style:{cursor:"pointer"},onClick:this.toggleAndHandleLike})):"")):null}}]),t}(r.a.Component)),fe=(n(61),function(){return r.a.createElement("div",{className:"spinner2"},r.a.createElement("div",{className:"rect1"}),r.a.createElement("div",{className:"rect2"}),r.a.createElement("div",{className:"rect3"}),r.a.createElement("div",{className:"rect4"}),r.a.createElement("div",{className:"rect5"}))}),me=function(e){function t(){var e,n;Object(U.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(G.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).state={page:1},n.showMore=function(){console.log(n.props),n.setState({page:n.state.page+1},function(){return n.props.showMore(n.props.searchFor,n.state.page)})},n}return Object(M.a)(t,e),Object(V.a)(t,[{key:"componentDidUpdate",value:function(e){e.searchFor!==this.props.searchFor&&this.setState({page:1})}},{key:"render",value:function(){console.log("state page: ",this.state.page);var e=this.props,t=e.photos,n=e.isFetching,a=e.error,o=e.userName,i=e.send,s=e.isSendingLike,c=e.isFetchingForMore,l=e.searchFor;return r.a.createElement("div",{className:"photos"},n?r.a.createElement(he,null):a?r.a.createElement(pe,{title:"Error while fetching"}):0===t.length?r.a.createElement(pe,{title:"Nothing found"}):t.map(function(e){return r.a.createElement(de,{key:e.id,urls:e.urls,id:e.id,description:e.description,isLiked:e.isLiked,toggleVisibility:!1,userName:o,send:i,isSendingLike:s})}),r.a.createElement("div",{className:"photos__show-more-block"},!l||n?"":c?r.a.createElement(fe,null):r.a.createElement("span",{className:"photos__show-more-btn",onClick:this.showMore},"show more")))}}]),t}(r.a.Component);me.defaultProps={photos:[]};var ge=me,Ee=function(){return{type:"TOGGLE_LIKE_REQUEST",payload:{isFetching:!0}}},ve=function(e){return{type:"TOGGLE_LIKE_REMOVE_SUCCESS",payload:{id_photo:e,isFetching:!1}}},be=function(e){return{type:"TOGGLE_LIKE_ADDED_SUCCESS",payload:{photo:e,isFetching:!1}}},_e=function(e){return{type:"TOGGLE_LIKE_FAIELD",payload:{error:!0,error_message:new Error(e)}}};function Oe(e,t,n,a){return function(r){r(Ee());var o={id_photo:e,urls:t,description:n,id_user:a};fetch(te($),{method:"POST",body:JSON.stringify(o)}).then(function(e){return e.json()}).then(function(e){if("removed"===e.STATUS){var t=e.RESPONSE;r(ve(t))}else if("added"===e.STATUS){var n=e.RESPONSE;r(be(n))}return e}).catch(function(e){r(_e(e))})}}var ye=function(e){function t(){return Object(U.a)(this,t),Object(G.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=Object(I.a)(A.a.mark(function e(){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.fetcher();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){this.props.searchFor!==e.searchFor&&this.fetcher()}},{key:"fetcher",value:function(){var e=Object(I.a)(A.a.mark(function e(){var t;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.searchFor,this.props.fetchPhotos(t);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.photos,n=e.userName,a=e.toggleLike,o=e.isFetching,i=e.error,s=e.showMore,c=e.searchFor,l=e.isFetchingForMore;return r.a.createElement(ge,{photos:t,isFetching:o,isFetchingForMore:l,error:i,userName:n,send:a,showMore:s,searchFor:c})}}]),t}(r.a.Component),Se=Object(l.b)(function(e){return{searchFor:e.photos.searchFor,userName:e.user.vk_id,photos:e.photos.photos,isFetching:e.photos.isFetching,error:e.photos.error,isFetchingForMore:e.photos.isFetchingForMore}},{toggleLike:Oe,fetchPhotos:function(e,t){return function(){var n=Object(I.a)(A.a.mark(function n(a){var r,o,i;return A.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a(ae(e)),n.next=3,fetch(Y(e,t)).then(function(e){return e.json()}).then(function(e){return e.results}).catch(function(e){return a(oe(e))});case 3:return r=n.sent,o=r.map(function(e){return e.id}),n.next=7,ie(o);case 7:void 0===(i=n.sent)&&(i=[]),r.map(function(e){return i.includes(e.id)?e.isLiked=!0:e.isLiked=!1,e}),a(re(r));case 11:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},showMore:function(e,t){return function(){var n=Object(I.a)(A.a.mark(function n(a){var r,o,i;return A.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a(ce(e)),n.next=3,fetch(Y(e,t)).then(function(e){return e.json()}).then(function(e){return e.results}).catch(function(e){return a(oe(e))});case 3:return r=n.sent,o=r.map(function(e){return e.id}),n.next=7,ie(o);case 7:void 0===(i=n.sent)&&(i=[]),r.map(function(e){return i.includes(e.id)?e.isLiked=!0:e.isLiked=!1,e}),a(se(r));case 11:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()}})(ye),Fe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,null),r.a.createElement(Se,null))},ke=(n(63),function(e){var t=e.favPhotos,n=e.userName,a=e.send,o=e.favPhotosLength;return r.a.createElement("div",{className:"favorites"},r.a.createElement("div",{className:"favorite__header"},r.a.createElement("h1",null,"Favorites photos"),r.a.createElement("p",{style:{color:"#a5a5a5"}},"you liked ",r.a.createElement("b",{style:{color:"#000"}},o)," photos")),r.a.createElement("div",{className:"favorites__body"},t.map(function(e){return r.a.createElement(de,{key:e.id_photo,urls:e.urls,id:e.id_photo,description:e.description,isLiked:!0,toggleVisibility:!0,userName:n,send:a})})))});function je(){return function(){c.send("VKWebAppGetUserInfo",{})}}var Ne=function(){return{type:"GET_FAVPHOTOS_REQUEST",payload:{isFetching:!0}}},we=function(e){return{type:"GET_FAVPHOTOS_SUCCESS",payload:{photos:e,isFetching:!1}}},Ce=function(e){return{type:"GET_FAVPHOTOS_FAIELD",payload:{error:!0,error_message:new Error(e)}}};var Le=function(e){function t(e){var n;return Object(U.a)(this,t),(n=Object(G.a)(this,Object(P.a)(t).call(this,e))).state={favPhotos:n.props.photos?n.props.photos:[],isFetching:!n.props.photos},n}return Object(M.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=Object(I.a)(A.a.mark(function e(){var t;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.fetchFavPhotos(this.props.vk_id);case 2:(t=e.sent)&&this.setState({favPhotos:t.RESPONSE,isFetching:!1});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.favPhotos,n=e.isFetching;return console.log("<favCOntainer>",n),n?r.a.createElement(he,null):r.a.createElement(ke,{userName:""+this.props.vk_id,favPhotos:t,favPhotosLength:this.props.photos.length,send:this.props.toggleLike})}}]),t}(r.a.Component),Te=Object(l.b)(function(e){return{vk_id:e.user.vk_id,photos:e.user.favorites_photos.photos,isFetching:e.user.favorites_photos.isFetching}},{fetchFavPhotos:function(e){return function(t){var n={vk_id:e};return t(Ne()),fetch(te(z),{method:"POST",body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){return t(we(e.RESPONSE)),e}).catch(function(e){return t(Ce(e))})}},toggleLike:Oe})(Le),Ae=(n(65),function(){return r.a.createElement("div",{className:"no-match"},r.a.createElement("h1",null,"404"))}),Ie=function(e){function t(){var e,n;Object(U.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(G.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).state={name:void 0,photo:void 0},n.loginByVK=function(){je()()},n}return Object(M.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.photo;return r.a.createElement("div",{className:"login"},r.a.createElement("button",{onClick:this.loginByVK},"login by VK"),t?r.a.createElement("div",null,r.a.createElement("h1",null,this.state.name),r.a.createElement("img",{src:n,alt:""})," "):"")}}]),t}(r.a.Component),Ue=n(73),Ve=(n(67),function(e){var t=e.avatar,n=e.name,a=e.last_name,o=e.onClick,i=e.isSending,s=e.error;return e.isLogedIn?r.a.createElement(Ue.a,{to:"/"}):r.a.createElement("div",{className:"entrance"},r.a.createElement("img",{className:"entrance__avatar",src:t,alt:"avatar"}),r.a.createElement("h1",{className:"entrance__title"},n," ",a),r.a.createElement("button",{className:"entrance__btn",onClick:o},"LogIn"),i?r.a.createElement(he,null):"",s?r.a.createElement("h1",null,"Some error while adding your profile"):"")}),Ge=function(e){function t(){var e,n;Object(U.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(G.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).state={isSending:!1,logedIn:!1,error:!1},n.logIn=Object(I.a)(A.a.mark(function e(){var t,a,r,o,i,s,c;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.user,a=t.vk_id,r=t.name,o=t.last_name,i=t.email,n.setState({isSending:!0}),s={vk_id:a,name:r,last_name:o,email:i},console.log(s),e.next=6,fetch(te(Z),{method:"POST",body:JSON.stringify(s)}).then(function(e){return e.json()}).catch(function(e){return console.log(new Error(e))});case 6:c=e.sent,console.log("res===>",c.RESPONSE),c.RESPONSE?n.setState({logedIn:!0,isSending:!1,error:!1}):n.setState({logedIn:!1,error:!0,isSending:!1});case 9:case"end":return e.stop()}},e,this)})),n}return Object(M.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchEmail()}},{key:"render",value:function(){console.log("YOU ARE IN ENTRANCE CONTAINER");var e=this.props.user,t=e.name,n=e.last_name,a=e.avatar,o=this.state,i=o.isSending,s=o.error,c=o.logedIn;return r.a.createElement(Ve,{name:t,last_name:n,avatar:a,isSending:i,error:s,onClick:this.logIn,isLogedIn:c})}}]),t}(r.a.Component),Pe=Object(l.b)(function(e){return{user:e.user}},{fetchEmail:function(){return function(){c.send("VKWebAppGetEmail",{})}}})(Ge),Me=function(e){function t(){var e,n;Object(U.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(G.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).logIn=function(){},n}return Object(M.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props.isSignedUp;return r.a.createElement("div",{className:"App"},e?r.a.createElement(r.a.Fragment,null,r.a.createElement(q,null),r.a.createElement(J,null),r.a.createElement(D.a,null,r.a.createElement(x.a,{exact:!0,path:"/",component:Fe}),r.a.createElement(x.a,{path:"/favorites",component:Te}),r.a.createElement(x.a,{path:"/login-page",component:Ie}),r.a.createElement(x.a,{component:Ae}))):r.a.createElement(Pe,null))}}]),t}(a.Component);var Re=function(e){function t(){var e,n;Object(U.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(G.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).state={isSignedUp:!1,isFetching:!0},n}return Object(M.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=Object(I.a)(A.a.mark(function e(){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.fetchUser();case 2:return e.next=4,this.props.initApp();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){this.props!==e&&this.fetcher()}},{key:"fetcher",value:function(){var e=Object(I.a)(A.a.mark(function e(){var t,n;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.user.vk_id,n={vk_id:t},e.next=4,fetch(te("/is-signed-up/"),{method:"POST",body:JSON.stringify(n)}).then(function(e){return e.json()});case 4:e.sent.RESPONSE?this.setState({isSignedUp:!0,isFetching:!1}):this.setState({isSignedUp:!1,isFetching:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isFetching?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(he,null)):r.a.createElement(Me,{isSignedUp:this.state.isSignedUp})}}]),t}(r.a.Component),De=Object(R.a)(Object(l.b)(function(e){return{user:e.user}},{initApp:function(){return function(e){c.subscribe(function(t){var n=t.detail,a=n.type,r=n.data;switch(a){case"VKWebAppGetUserInfoResult":e({type:O,payload:r});break;case"VKWebAppGetUserInfoFailed":e({type:y,payload:r,error:!0});break;case"VKWebAppGetEmailResult":e({type:S,payload:r});break;case"VKWebAppGetEmailFailed":e({type:F,payload:r});break;default:console.log("wtf")}})}},fetchUser:je})(Re));c.send("VKWebAppInit",{}),i.a.render(r.a.createElement(l.a,{store:L},r.a.createElement(s.a,null,r.a.createElement(De,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,2,1]]]);
//# sourceMappingURL=main.5ca2fa60.chunk.js.map